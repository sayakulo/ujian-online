<!DOCTYPE html>
<html lang="id">
<head>
  <meta charset="UTF-8">
  <title>Silahkan Login</title>
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet">
  <style>
    body {
      background: linear-gradient(to right, #e3f2fd, #bbdefb);
    }
    .card {
      border-radius: 15px;
    }
  </style>
</head>
<body class="d-flex align-items-center justify-content-center vh-100">

  <div class="card shadow p-4" style="width: 22rem;">
    <h1 class="h4 text-center mb-4 text-primary">Ujian Online (Pre-Alpha)</h1>
    <form>
      <!-- Pilih Mode Login -->
      <div class="mb-3">
        <label class="form-label">Login Sebagai:</label>
        <div class="form-check">
          <input class="form-check-input" type="radio" name="mode" id="siswa" value="siswa" checked>
          <label class="form-check-label" for="siswa">Siswa</label>
        </div>
        <div class="form-check">
          <input class="form-check-input" type="radio" name="mode" id="admin" value="admin">
          <label class="form-check-label" for="admin">Admin</label>
        </div>
      </div>

      <!-- Username -->
      <div class="mb-3">
        <label for="user" class="form-label">User Name</label>
        <input type="text" class="form-control" id="user" placeholder="masukkan username">
      </div>

      <!-- Password -->
      <div class="mb-3">
        <label for="pass" class="form-label">Password</label>
        <input type="password" class="form-control" id="pass" placeholder="masukkan password">
      </div>

      <!-- Kelas dan Jurusan -->
      <div id="kelasJurusan" class="mb-3">
        <label class="form-label">Kelas dan Jurusan</label>
        <div class="form-check">
          <input class="form-check-input" type="radio" name="kdj" id="xrpl" value="X RPL">
          <label class="form-check-label" for="xrpl">X RPL</label>
        </div>
        <div class="form-check">
          <input class="form-check-input" type="radio" name="kdj" id="xirpl" value="XI RPL">
          <label class="form-check-label" for="xirpl">XI RPL</label>
        </div>
        <div class="form-check">
          <input class="form-check-input" type="radio" name="kdj" id="xiirpl" value="XII RPL">
          <label class="form-check-label" for="xiirpl">XII RPL</label>
        </div>
        <div class="form-check">
          <input class="form-check-input" type="radio" name="kdj" id="xakl" value="X AKL">
          <label class="form-check-label" for="xakl">X AKL</label>
        </div>
      </div>

      <!-- Tombol -->
      <button id="login" type="button" class="btn btn-primary w-100">Login</button>
      <p id="errorMsg" class="text-danger small mt-2"></p>
    </form>
  </div>

  <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js"></script>

  <script>
  document.addEventListener("DOMContentLoaded", () => {
    const loginBtn = document.getElementById("login");
    const user = document.getElementById("user");
    const password = document.getElementById("pass");
    const errorMsg = document.getElementById("errorMsg");
    const kelasJurusan = document.getElementById("kelasJurusan");
    const radios = document.querySelectorAll('input[name="mode"]');

    // Sembunyikan/lihat bagian kelas saat ganti mode
    radios.forEach(r => {
      r.addEventListener("change", () => {
        if (document.getElementById("admin").checked) {
          kelasJurusan.style.display = "none";
        } else {
          kelasJurusan.style.display = "block";
        }
      });
    });

    loginBtn.addEventListener("click", (e) => {
      e.preventDefault();

      const username = user.value.trim();
      const pass = password.value.trim();
      const mode = document.querySelector('input[name="mode"]:checked').value;

      if (username === "" || pass === "") {
        errorMsg.innerHTML = "Username dan password tidak boleh kosong.";
        setTimeout(() => (errorMsg.innerHTML = ""), 3000);
        return;
      }

      // Login Admin
      if (mode === "admin") {
        if (username === "admin" && pass === "12345") {
          window.location.href = "admin.html";
        } else {
          errorMsg.innerHTML = "Login admin salah!";
          setTimeout(() => (errorMsg.innerHTML = ""), 3000);
        }
        return;
      }

      // Login Siswa
      const kdj = document.querySelector('input[name="kdj"]:checked');
      if (!kdj) {
        errorMsg.innerHTML = "Silakan pilih kelas/jurusan terlebih dahulu.";
        setTimeout(() => (errorMsg.innerHTML = ""), 3000);
        return;
      }

      // Simpan data siswa
      localStorage.setItem("login", username);
      localStorage.setItem("kdj", kdj.value);

      // Tentukan halaman soal
      let soalPage = "";
      switch (kdj.value) {
        case "X RPL": soalPage = "soal_x_rpl.html"; break;
        case "XI RPL": soalPage = "soal_xi_rpl.html"; break;
        case "XII RPL": soalPage = "soal_xii_rpl.html"; break;
        case "X AKL": soalPage = "soal_x_akl.html"; break;
        default: soalPage = "soal.html";
      }

      // Arahkan ke halaman soal
      window.location.href = soalPage;
    });
  });
  </script>
</body>
</html>
